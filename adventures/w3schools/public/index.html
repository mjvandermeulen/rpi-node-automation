<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        font-size: 150%;
      }

      h1 {
        font-size: 1.5em;
        font-weight: bold;
      }
      .btnOnOff {
        font-size: 0.8 em;
        background-color: white;
        color: black;
        border: 2px solid #e7e7e7;
        border-radius: 20px;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        text-transform: uppercase;
      }
      .btnOnOff:focus {
        outline: 0 !important;
        background-color: #f2f2f2;
      }

      .btnOnOffActive {
        background-color: white;
        color: black;
        border: 2px solid #f44336;
      }

      #counters {
        visibility: visible;
      }
    </style>
  </head>
  <body>
    <div>
      <h1>Remote Outlets</h1>
      <p>
        <button class="btnOnOff" id="lightOn">
          on
        </button>
        <button class="btnOnOff" id="lightOff">
          off
        </button>
        <span class="btnTitle">
          office
        </span>
      </p>
    </div>
    <div id="counters">
      <p>
        Incomming Socket Data count
        <span id="socCountIn">
          0
        </span>
      </p>
      <p>
        Outgoing Socket Data count
        <span id="socCountOut">
          0
        </span>
      </p>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <!-- include socket.io client side script -->
    <script>
      function counterUp(spanId) {
        inCounter = document.getElementById(spanId)
        c = parseInt(inCounter.innerHTML) + 1
        inCounter.innerHTML = c.toString()
      }

      var socket = io() // load socket.io-client and connect to the host that serves the page
      var onButton = document.getElementById('lightOn')
      var offButton = document.getElementById('lightOff')

      window.addEventListener('load', function() {
        // old "load" event, even all images will have loaded
        // NOTE: you can click the on or off buttons even if they are "on"
        onButton.addEventListener('click', function() {
          onButton.classList.add('btnOnOffActive')
          offButton.classList.remove('btnOnOffActive')
          socket.emit('light', Number(1))
          counterUp('socCountOut')
        })
        offButton.addEventListener('click', function() {
          onButton.classList.remove('btnOnOffActive')
          offButton.classList.add('btnOnOffActive')
          socket.emit('light', Number(0))
          counterUp('socCountOut')
        })
        socket.emit('light', -1) // request the current light status.
        counterUp('socCountOut')
      })
      socket.on('light', function(data) {
        if (data == 1) {
          onButton.classList.add('btnOnOffActive')
          offButton.classList.remove('btnOnOffActive')
        } else {
          onButton.classList.remove('btnOnOffActive')
          offButton.classList.add('btnOnOffActive')
        }
        counterUp('socCountIn')
      })
    </script>
  </body>
</html>
